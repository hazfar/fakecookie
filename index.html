<html>
<head>
	
</head>
<body>
	<img id="TheCookie" src="https://i.imgur.com/AhhFpo2.jpg" style="height: 100px;">
	<br>
	<span id="Cinfo">點擊餅乾！每點一次你會得到 1 塊餅乾！</span>
	<br>
	<span id="Ctimes">你現在有 0 塊餅乾！</span>
	<br>
	<img id="TheGranny" src="https://i.imgur.com/H1O8KaY.jpg" style="height: 100px;">
	<br>
	<span>一個餅乾婆婆每 10 秒會幫你生產 1 塊餅乾！</span>
	<span id="Ginfo">你現在可以消耗 100 塊餅乾得到一個餅乾婆婆！</span>
	<br>
	<span id="Gtimes">你現在有 0 個餅乾婆婆！每 10 秒會幫你生產 0 塊餅乾！</span>
	<br>
	<img id="TheMachine" src="https://i.imgur.com/GVyH10v.jpg" style="height: 100px;">
	<br>
	<span>一個自動餅乾機器每 1 秒會幫你生產 1 塊餅乾！</span>
	<span id="Minfo">你可以消耗 1000 塊餅乾得到一個自動餅乾機器！</span>
	<br>
	<span id="Mtimes">你現在有 0 個自動餅乾機器！每 1 秒會幫你生產 0 塊餅乾！</span>
	<br>
	<!-- HTML的換行 -->
	<img id="ThePortal" src="https://i.imgur.com/ZsMk8Vf.jpg" style="height: 100px;">
	<br>
	<span>一個神秘餅乾傳送門每 1 秒會幫你生產 10 塊餅乾！</span>
	<span id="Pinfo">你可以消耗 5000 塊餅乾得到一個神秘餅乾傳送門！</span>
	<br>
	<span id="Ptimes">你現在有 0 個神秘餅乾傳送門！每 1 秒會幫你生產 0 塊餅乾！</span>
</body>
<script type="text/javascript">

	var factoryArray = [
			{
				id: 'TheCookie',
				cost: 0,//原本用-1有問題 每次點擊變成兩塊餅乾
				amount: 0,
				production: 0,
				time: 1000000000000000,
				lalala: "Ctimes",
				info: "Cinfo",
				fufufu: "塊餅乾！",
			},
			{
				id: 'TheGranny',
				cost: 100,
				amount: 0,
				production: 1,
				time: 10000,
				lalala: "Gtimes",
				info: "Ginfo",
				fufufu: "個餅乾婆婆！",
			},
			{
				id: 'TheMachine',
				cost: 1000,
				amount: 0,
				production: 1,
				time: 1000,
				lalala: "Mtimes",
				info: "Minfo",
				fufufu: "個自動餅乾機器！",
			},
			{
				id: 'ThePortal',
				cost: 5000,
				amount: 0,
				production: 10,
				time: 1000,
				lalala: "Ptimes",
				info: "Pinfo",
				fufufu: "個神秘餅乾傳送門！",
			},
		];

	function updateCookie(amount = 0) {
		factoryArray[0].amount += amount
		document.getElementById(factoryArray[0].lalala).innerText = `你現在有 ${ factoryArray[0].amount } ${ factoryArray[0].fufufu }`
	}

	function costAdder() {
		factoryArray[i].cost += factoryArray[i].cost * 0.01
		document.getElementById(factoryArray[i].info).innerText = `你現在可以消耗 ${ factoryArray[i].cost } 塊餅乾得到一${ factoryArray[i].fufufu }`
	}

	function cookieAdder(amount, time) {
		updateCookie(amount)
		submitAdder(amount, time)
	}

	function submitAdder(amount, time) {
		setTimeout(cookieAdder, time, amount, time);
	}

	for (let i = 0; i < factoryArray.length; i++) {
		document.getElementById(factoryArray[i].id).addEventListener('click' && 'touchstart', function(e){
			if(factoryArray[i].cost <= factoryArray[0].amount){
				factoryArray[i].amount++;
				submitAdder(factoryArray[i].production , factoryArray[i].time)
				// submitAdder(factoryArray[i].amount * factoryArray[i].production, factoryArray[i].time)

				updateCookie( -factoryArray[i].cost )
				// factoryArray[0].amount -= factoryArray[i].cost;
				// document.getElementById(factoryArray[0].lalala).innerText = factoryArray[0].amount
				factoryArray[i].cost += factoryArray[i].cost * 0.01 | 0;
			}

			if( i > 0){
				document.getElementById(factoryArray[i].lalala).innerText = `你現在有 ${ factoryArray[i].amount } ${ factoryArray[i].fufufu }每 ${ factoryArray[i].time / 1000 } 秒會幫你生產 ${ factoryArray[i].amount * factoryArray[i].production } 塊餅乾！`
				// document.getElementById(factoryArray[i].lalala).innerText = 'you have ' + factoryArray[i].amount + ' ' + factoryArray[i].fufufu
				document.getElementById(factoryArray[i].info).innerText = `你現在可以消耗 ${ factoryArray[i].cost } 塊餅乾得到一${ factoryArray[i].fufufu }`
			}

		})


	}
</script>
</html>